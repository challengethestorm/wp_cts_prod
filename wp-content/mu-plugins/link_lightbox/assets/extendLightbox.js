(function(e){var t,n,r,i,s,o,u,a,f,l,c,h=0,p={},d=[],v=0,m={},g=[],y=null,b=new Image,w=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,E=/[^\.]\.(swf)\s*$/i,S,x=1,T=0,N="",C,k,L=false,A=e.extend(e("<div/>")[0],{prop:0}),O=function(){n.hide();b.onerror=b.onload=null;if(y){y.abort()}t.empty()},M=function(){if(false===p.onError(d,h,p)){n.hide();L=false;return}p.titleShow=false;p.width="auto";p.height="auto";t.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');P()},_=function(){var r=d[h],i,o,a,f,l,c;O();p=e.extend({},e.fn.xtd_fancybox.defaults,typeof e(r).data("fancybox")=="undefined"?p:e(r).data("fancybox"));c=p.onStart(d,h,p);if(c===false){L=false;return}else if(typeof c=="object"){p=e.extend(p,c)}s.removeAttr("class").addClass("fb-outer-wrapper").addClass(p.selectedInstance);a=p.title||(r.nodeName?e(r).attr("title"):r.title)||"";p.hasControlsBar=!((!p.showCaption||a=="")&&d.length==1);if(r.nodeName&&!p.orig){p.orig=e(r).children("img:first").length?e(r).children("img:first"):e(r)}if(a===""&&p.orig&&p.titleFromAlt){a=p.orig.attr("alt")}i=p.href||(r.nodeName?e(r).attr("href"):r.href)||null;if(/^(?:javascript)/i.test(i)||i=="#"){i=null}if(p.type){o=p.type;if(!i){i=p.content}}else if(p.content){o="html"}else if(i){if(i.match(w)){o="image"}else if(i.match(E)){o="swf"}else if(e(r).hasClass("iframe")){o="iframe"}else if(i.indexOf("#")===0){o="inline"}else{o="ajax"}}if(!o){M();return}if(o=="inline"){r=i.substr(i.indexOf("#"));o=e(r).length>0?"inline":"ajax"}p.type=o;p.href=i;p.title=a;if(p.autoDimensions){if(p.type=="html"||p.type=="inline"||p.type=="ajax"){p.width="auto";p.height="auto"}else{p.autoDimensions=false}}if(p.modal){p.overlayShow=true;p.hideOnOverlayClick=false;p.hideOnContentClick=false;p.enableEscapeButton=false;p.showCloseButton=false}p.padding=parseInt(p.padding,10);p.margin=parseInt(p.margin,10);t.css("padding",p.padding+p.margin);e(".fancybox-inline-tmp").replaceWith(u.children());switch(o){case"html":t.html(p.content);P();break;case"inline":if(e(r).parent().is("#fancybox-content")===true){L=false;return}e('<div class="fancybox-inline-tmp" />').hide().insertBefore(e(r)).bind("fancybox-cleanup",function(){}).bind("fancybox-cancel",function(){e(this).replaceWith(t.children())});e(r).appendTo(t);P();break;case"image":L=false;e.xtd_fancybox.showActivity();b=new Image;b.onerror=function(){M()};b.onload=function(){L=true;b.onerror=b.onload=null;H()};b.src=i;break;case"swf":p.scrolling="no";f='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+p.width+'" height="'+p.height+'"><param name="movie" value="'+i+'"></param>';l="";e.each(p.swf,function(e,t){f+='<param name="'+e+'" value="'+t+'"></param>';l+=" "+e+'="'+t+'"'});f+='<embed src="'+i+'" type="application/x-shockwave-flash" width="'+p.width+'" height="'+p.height+'"'+l+"></embed></object>";t.html(f);P();break;case"ajax":L=false;e.xtd_fancybox.showActivity();p.ajax.win=p.ajax.success;y=e.ajax(e.extend({},p.ajax,{url:i,data:p.ajax.data||{},error:function(e,t,n){if(e.status>0){M()}},success:function(e,r,s){var o=typeof s=="object"?s:y;if(o.status==200){if(typeof p.ajax.win=="function"){c=p.ajax.win(i,e,r,s);if(c===false){n.hide();return}else if(typeof c=="string"||typeof c=="object"){e=c}}t.html(e);P()}}}));break;case"iframe":D();break}},D=function(){B()},P=function(){var n=p.width,r=p.height;if(n.toString().indexOf("%")>-1){n=parseInt((e(window).width()-p.margin*2)*parseFloat(n)/100,10)+"px"}else{n=n=="auto"?"auto":n+"px"}if(r.toString().indexOf("%")>-1){r=parseInt((e(window).height()-p.margin*2)*parseFloat(r)/100,10)+"px"}else{r=r=="auto"?"auto":r+"px"}var i='<div style="width:'+n+";height:"+r+";overflow: "+(p.scrolling=="auto"?"auto":p.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>';t.wrapInner(i);p.width=t.width();p.height=t.height();B()},H=function(){p.width=b.width;p.height=b.height;e("<img />").attr({id:"fancybox-img",src:b.src,alt:p.title}).appendTo(t);B()},B=function(){var s,o;n.hide();if(i.is(":visible")&&m.onCleanup&&false===m.onCleanup(g,v,m)){e.event.trigger("fancybox-cancel");e(".fancybox-inline-tmp").replaceWith(u.children());L=false;return}L=true;e(u.add(r)).unbind();e(window).unbind("resize.fb scroll.fb");e(document).unbind("keydown.fb");if(i.is(":visible")&&m.titlePosition!=="outside"){i.css("height",i.height())}g=d;v=h;m=p;if(m.overlayShow){r.css({"background-color":m.overlayColor,opacity:m.overlayOpacity,cursor:m.hideOnOverlayClick?"pointer":"auto",height:e(document).height()});if(!r.is(":visible")){r.show()}}else{r.hide()}k=W();F();if(i.is(":visible")){e(a.add(l).add(c)).hide();s=i.position(),C={top:s.top,left:s.left,width:u.width()+m.padding*2,height:u.height()+m.padding*2};o=C.width==k.width&&C.height==k.height;u.fadeTo(m.changeFade,.3,function(){var n=function(){u.html(t.contents()).fadeTo(m.changeFade,1,q)};e.event.trigger("fancybox-change");var r=k.height-T-m.padding*2;var i=z();var s=i[1]<500?50:200;if(e(window).height()-r<s&&p.hasControlsBar){r=e(window).height()-s}u.empty().removeAttr("filter").css({"border-width":m.padding,width:k.width-m.padding*2,height:p.autoDimensions?"auto":r});if(o){n()}else{A.prop=0;e(A).animate({prop:1},{duration:m.changeSpeed,easing:m.easingChange,step:U,complete:n})}});return}i.removeAttr("style");u.css("border-width",m.padding);if(m.transitionIn=="elastic"){C=V();u.html(t.contents());i.show();if(m.opacity){k.opacity=0}A.prop=0;e(A).animate({prop:1},{duration:m.speedIn,easing:m.easingIn,step:U,complete:q});return}if(m.titlePosition=="inside"&&T>0){f.show()}var y=k.height-T-m.padding*2;u.css({width:k.width-m.padding*2,height:p.autoDimensions?"auto":y}).html(t.contents());i.css(k).fadeIn(m.transitionIn=="none"?0:m.speedIn,q)},j=function(e){if(e&&e.length){if(m.titlePosition=="float"){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+e+'</td><td id="fancybox-title-float-right"></td></tr></table>'}return'<div id="fancybox-title-'+m.titlePosition+'">'+e+"</div>"}return false},F=function(){N=m.title||"";T=0;f.empty().removeAttr("style").removeClass();if(m.titleShow===false){f.hide();return}N=e.isFunction(m.titleFormat)?m.titleFormat(N,g,v,m):j(N);if(!N||N===""){f.hide();return}f.addClass("fancybox-title-"+m.titlePosition).html(N).appendTo("body").show();switch(m.titlePosition){case"inside":f.css({width:k.width-m.padding*2,marginLeft:m.padding,marginRight:m.padding});T=f.outerHeight(true);f.appendTo(o);k.height+=T;break;case"over":f.css({marginLeft:m.padding,width:k.width-m.padding*2,bottom:m.padding}).appendTo(o);break;case"float":f.css("left",parseInt((f.width()-k.width-40)/2,10)*-1).appendTo(i);break;default:f.css({width:k.width-m.padding*2,paddingLeft:m.padding,paddingRight:m.padding}).appendTo(i);break}f.hide()},I=function(){if(m.enableEscapeButton||m.enableKeyboardNav){e(document).bind("keydown.fb",function(t){if(t.keyCode==27&&m.enableEscapeButton){t.preventDefault();e.xtd_fancybox.close()}else if((t.keyCode==37||t.keyCode==39)&&m.enableKeyboardNav&&t.target.tagName!=="INPUT"&&t.target.tagName!=="TEXTAREA"&&t.target.tagName!=="SELECT"){t.preventDefault();e.xtd_fancybox[t.keyCode==37?"prev":"next"]()}})}if(!m.showNavArrows){l.hide();c.hide();return}if(m.cyclic&&g.length>1||v!==0){l.show()}if(m.cyclic&&g.length>1||v!=g.length-1){c.show()}},q=function(){if(!e.support.opacity){u.get(0).style.removeAttribute("filter");i.get(0).style.removeAttribute("filter")}if(p.autoDimensions){u.css("height","auto")}i.css("height","auto");if(N&&N.length){f.show()}if(m.showCloseButton){a.show()}I();if(m.hideOnContentClick){u.bind("click",e.xtd_fancybox.close)}else{u.bind("click",e.xtd_fancybox.next)}if(m.hideOnOverlayClick){r.bind("click",e.xtd_fancybox.close)}e(window).bind("resize.fb",e.xtd_fancybox.resize);if(m.centerOnScroll){e(window).bind("scroll.fb",e.xtd_fancybox.center)}if(m.type=="iframe"){e('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+' scrolling="'+p.scrolling+'" src="'+m.href+'"></iframe>').appendTo(u)}i.show().addClass("extend-effect");L=false;e.xtd_fancybox.center();m.onComplete(g,v,m);R()},R=function(){var e,t;if(g.length-1>v){e=g[v+1].href;if(typeof e!=="undefined"&&e.match(w)){t=new Image;t.src=e}}if(v>0){e=g[v-1].href;if(typeof e!=="undefined"&&e.match(w)){t=new Image;t.src=e}}},U=function(t){var n=parseInt(e("#fancybox-title").height()/2);var r=parseInt(e(window).height()-e("#fancybox-xtdLightbox-effects").height())/2;var s={width:parseInt(C.width+(k.width-C.width)*t,10),height:parseInt(C.height+(k.height-C.height)*t,10),top:parseInt(C.top+(k.top-C.top)*t,10),left:parseInt(C.left+(k.left-C.left)*t,10)};if(typeof k.opacity!=="undefined"){s.opacity=t<.5?.5:t}i.css(s);var o=s.height-T*t-m.padding*2;var a=z();var f=a[1]<500?50:200;if(e(window).height()-o<f&&p.hasControlsBar){o=e(window).height()-f}u.css({width:s.width-m.padding*2,height:o})},z=function(){return[e(window).width()-m.margin*2,e(window).height()-m.margin*2,e(document).scrollLeft()+m.margin,e(document).scrollTop()+m.margin]},W=function(){var e=z(),t={},n=m.autoScale,r=m.padding*2,i;i=m.width/m.height;if(m.width.toString().indexOf("%")>-1){t.width=parseInt(e[0]*parseFloat(m.width)/100,10)}else{t.width=parseInt(m.width)+r}if(m.height.toString().indexOf("%")>-1){t.height=parseInt(e[1]*parseFloat(m.height)/100,10)}else{t.height=parseInt(m.height)+r;var s=e[1]<500?50:200;if(e[1]-t.height<s){t.height=e[1]-s;t.width=parseInt(t.height*i)}}if(n&&(t.width>e[0]||t.height>e[1])){if(p.type=="image"||p.type=="swf"){if(t.width>e[0]){t.width=e[0];t.height=parseInt((t.width-r)/i+r,10)}if(t.height>e[1]-200){t.height=e[1]-200;t.width=parseInt((t.height-r)*i+r,10)}}else{t.width=Math.min(t.width,e[0]);t.height=Math.min(t.height,e[1])}}var o=e[1]<500?20:120;t.top=parseInt(Math.max(e[3]-20,e[3]+(e[1]-t.height-o)*.5),10);t.left=parseInt(Math.max(e[2]-20,e[2]+(e[0]-t.width-20)*.5),10);return t},X=function(e){var t=e.offset();t.top+=parseInt(e.css("paddingTop"),10)||0;t.left+=parseInt(e.css("paddingLeft"),10)||0;t.top+=parseInt(e.css("border-top-width"),10)||0;t.left+=parseInt(e.css("border-left-width"),10)||0;t.width=e.width();t.height=e.height();return t},V=function(){var t=p.orig?e(p.orig):false,n={},r,i;if(t&&t.length){r=X(t);n={width:r.width+m.padding*2,height:r.height+m.padding*2,top:r.top-m.padding-20,left:r.left-m.padding-20}}else{i=z();n={width:m.padding*2,height:m.padding*2,top:parseInt(i[3]+i[1]*.5,10),left:parseInt(i[2]+i[0]*.5,10)}}return n},$=function(){if(!n.is(":visible")){clearInterval(S);return}e("div",n).css("top",x*-40+"px");x=(x+1)%12};e.fn.xtd_fancybox=function(t){if(!e(this).length){return this}t.selectedInstance=e(this).attr("rel");t.height=e(this).attr("data-height");t.width=e(this).attr("data-width");e(this).data("fancybox",e.extend({},t,e.metadata?e(this).metadata():{})).unbind("click.fb").bind("click.fb",function(t){t.preventDefault();if(L){return}L=true;e(this).blur();d=[];h=0;var n=e(this).attr("rel")||"";if(!n||n==""||n==="nofollow"){d.push(this)}else{d=e("a[rel="+n+"], area[rel="+n+"]");h=d.index(this)}d.length>1;var r=[];var i=[];var s;e.each(d,function(t,n){s=e.inArray(n.href,r);if(e.inArray(n.href,r)===-1){i.push(n);r.push(n.href)}else{if(t==h){h=s}}});d=i;_();return});return this};e.xtd_fancybox=function(t){var n;if(L){return}L=true;n=typeof arguments[1]!=="undefined"?arguments[1]:{};d=[];h=parseInt(n.index,10)||0;if(e.isArray(t)){for(var r=0,i=t.length;r<i;r++){if(typeof t[r]=="object"){e(t[r]).data("fancybox",e.extend({},n,t[r]))}else{t[r]=e({}).data("fancybox",e.extend({content:t[r]},n))}}d=e.merge(d,t)}else{if(typeof t=="object"){e(t).data("fancybox",e.extend({},n,t))}else{t=e({}).data("fancybox",e.extend({content:t},n))}d.push(t)}if(h>d.length||h<0){h=0}_()};e.xtd_fancybox.showActivity=function(){clearInterval(S);n.show();S=setInterval($,66)};e.xtd_fancybox.hideActivity=function(){n.hide()};e.xtd_fancybox.next=function(){return e.xtd_fancybox.pos(v+1)};e.xtd_fancybox.prev=function(){return e.xtd_fancybox.pos(v-1)};e.xtd_fancybox.pos=function(e){if(L){return}e=parseInt(e);d=g;if(e>-1&&e<g.length){h=e;_()}else if(m.cyclic&&g.length>1){h=e>=g.length?0:g.length-1;_()}return};e.xtd_fancybox.cancel=function(){if(L){return}L=true;e.event.trigger("fancybox-cancel");O();p.onCancel(d,h,p);L=false};e.xtd_fancybox.close=function(){function t(){r.fadeOut("fast");f.empty().hide();i.hide();e(".fancybox-inline-tmp").replaceWith(u.children());e.event.trigger("fancybox-cleanup");u.empty();m.onClosed(g,v,m);g=p=[];v=h=0;m=p={};L=false}if(L||i.is(":hidden")){return}L=true;if(m&&false===m.onCleanup(g,v,m)){L=false;return}O();e(a.add(l).add(c)).hide();e(u.add(r)).unbind();e(window).unbind("resize.fb scroll.fb");e(document).unbind("keydown.fb");i.removeClass("extend-effect");if(m.titlePosition!=="inside"){f.empty()}i.stop();if(m.transitionOut=="elastic"){C=V();var n=i.position();k={top:n.top,left:n.left,width:i.width(),height:i.height()};if(m.opacity){k.opacity=1}f.empty().hide();A.prop=1;e(A).animate({prop:0},{duration:m.speedOut,easing:m.easingOut,step:U,complete:t})}else{i.fadeOut(m.transitionOut=="none"?0:m.speedOut,t)}};e.xtd_fancybox.resize=function(){if(r.is(":visible")){r.css("height",e(document).height())}e.xtd_fancybox.center(true)};e.xtd_fancybox.center=function(){var t,n;if(L){return}n=arguments[0]===true?1:0;t=z();if(!n&&(i.width()>t[0]||i.height()>t[1])){return}var r=u.height();var s=t[1]<500?50:200;if(t[1]-u.height()<s){r=t[1]-s}var o=t[1]<500?20:120;var a=parseInt(e("#fancybox-title").height()/2);i.stop().animate({top:parseInt(Math.max(t[3]-20,t[3]+(t[1]-u.height()-o)*.5-m.padding)),left:parseInt(Math.max(t[2]-20,t[2]+(t[0]-u.width()-20)*.5-m.padding))},typeof arguments[0]=="number"?arguments[0]:200)};e.xtd_fancybox.init=function(){if(e(".fb-outer-wrapper").length){return}s=e('<div class="fb-outer-wrapper"></div>');s.append(t=e('<div id="fancybox-tmp"></div>'),n=e('<div id="fancybox-loading"><div></div></div>'),r=e('<div id="fancybox-overlay"></div>'),i=e('<div id="fancybox-wrap"></div>'));e("body").append(s);i.wrap('<div id="perspective-fix"></div> ').wrap('<div id="fancybox-xtdLightbox-effects"></div>');o=e('<div id="fancybox-outer"></div>').appendTo(i);o.append(u=e('<div id="fancybox-content"></div>'),a=e('<a id="fancybox-close"></a>'),f=e('<div id="fancybox-title"></div>'),l=e('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),c=e('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));a.click(e.xtd_fancybox.close);n.click(e.xtd_fancybox.cancel);l.click(function(t){t.preventDefault();e.xtd_fancybox.prev()});c.click(function(t){t.preventDefault();e.xtd_fancybox.next()});if(e.fn.mousewheel){i.bind("mousewheel.fb",function(t,n){if(L){t.preventDefault()}else if(e(t.target).get(0).clientHeight==0||e(t.target).get(0).scrollHeight===e(t.target).get(0).clientHeight){t.preventDefault();e.xtd_fancybox[n>0?"prev":"next"]()}})}if(!e.support.opacity){i.addClass("fancybox-ie")}};e.fn.xtd_fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:.7,overlayColor:"#777",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};e(document).ready(function(){e.xtd_fancybox.init()})})(jQuery);(function(e){var t=window.Mobify=window.Mobify||{};t.$=t.$||window.Zepto||window.jQuery;t.UI=t.UI?t.$.extend(t.UI,{classPrefix:"m-"}):{classPrefix:"m-"};(function(e,t){e.support=e.support||{};e.extend(e.support,{touch:"ontouchend"in t})})(t.$,document);t.UI.Utils=function(e){var t={},n=e.support,r=navigator.userAgent;t.events=n.touch?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"};t.getCursorPosition=n.touch?function(e){e=e.originalEvent||e;return{x:e.touches[0].clientX,y:e.touches[0].clientY}}:function(e){return{x:e.clientX,y:e.clientY}};t.getProperty=function(e){var t=["Webkit","Moz","O","ms",""],n=document.createElement("div").style;for(var r=0;r<t.length;++r){if(n[t[r]+e]!==undefined){return t[r]+e}}return};e.extend(n,{transform:!!t.getProperty("Transform"),transform3d:!!(window.WebKitCSSMatrix&&"m11"in new WebKitCSSMatrix&&!/android\s+[1-2]/i.test(r))});var i=t.getProperty("Transform");if(n.transform3d){t.translateX=function(e,t){if(typeof t=="number")t=t+"px";e.style[i]="translate3d("+t+",0,0)"}}else if(n.transform){t.translateX=function(e,t){if(typeof t=="number")t=t+"px";e.style[i]="translate("+t+",0)"}}else{t.translateX=function(e,t){if(typeof t=="number")t=t+"px";e.style.left=t}}var s=t.getProperty("Transition"),o=t.getProperty("TransitionDuration");t.setTransitions=function(e,t){if(t){e.style[o]=""}else{e.style[o]="0s"}};t.requestAnimationFrame=function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var t=function(){e.apply(window,arguments)};return t}();return t}(t.$);t.UI.Carousel=function(e,n){var r={dragRadius:10,moveRadius:10,classPrefix:undefined,classNames:{outer:"carousel",inner:"carousel-inner",item:"item",center:"center",touch:"has-touch",dragging:"dragging",active:"active",fluid:"fluid"}},i=e.support;var s=function(e,t){this.setOptions(t);this.initElements(e);this.initOffsets();this.initAnimation();this.bind()};s.defaults=r;s.prototype.setOptions=function(n){var i=this.options||e.extend({},r,n);i.classNames=e.extend({},i.classNames,n.classNames||{});i.classPrefix=i.classPrefix||t.UI.classPrefix;this.options=i};s.prototype.initElements=function(t){this._index=1;this.element=t;this.$element=e(t);this.$inner=this.$element.find("."+this._getClass("inner"));this.$items=this.$inner.children();this.$start=this.$items.eq(0);this.$sec=this.$items.eq(1);this.$current=this.$items.eq(this._index-1);this._length=this.$items.length;this._alignment=this.$element.hasClass(this._getClass("center"))?.5:0;this._isFluid=this.$element.hasClass(this._getClass("fluid"))};s.prototype.initOffsets=function(){this._offsetDrag=0};s.prototype.initAnimation=function(){this.animating=false;this.dragging=false;this._needsUpdate=false;this._enableAnimation()};s.prototype._getClass=function(e){return this.options.classPrefix+this.options.classNames[e]};s.prototype._enableAnimation=function(){if(this.animating){return}n.setTransitions(this.$inner[0],true);this.$inner.removeClass(this._getClass("dragging"));this.animating=true};s.prototype._disableAnimation=function(){if(!this.animating){return}n.setTransitions(this.$inner[0],false);this.$inner.addClass(this._getClass("dragging"));this.animating=false};s.prototype.update=function(){if(this._needsUpdate){return}var e=this;this._needsUpdate=true;n.requestAnimationFrame(function(){e._update()})};s.prototype._update=function(){if(!this._needsUpdate){return}var e=this.$current,t=this.$start,r=e.prop("offsetLeft")+e.prop("clientWidth")*this._alignment,i=t.prop("offsetLeft")+t.prop("clientWidth")*this._alignment,s=Math.round(-(r-i)+this._offsetDrag);n.translateX(this.$inner[0],s);this._needsUpdate=false};s.prototype.bind=function(){function y(e){if(!i.touch)e.preventDefault();r=true;s=false;u=n.getCursorPosition(e);a=0;f=0;l=false;c._disableAnimation();v=c._index==1;m=c._index==c._length}function b(e){if(!r||s)return;var i=n.getCursorPosition(e),h=c.$element.width();a=u.x-i.x;f=u.y-i.y;if(l||t(a)>t(f)&&t(a)>o){l=true;e.preventDefault();if(v&&a<0){a=a*-h/(a-h)}else if(m&&a>0){a=a*h/(a+h)}c._offsetDrag=-a;c.update()}else if(t(f)>t(a)&&t(f)>o){s=true}}function w(e){if(!r){return}r=false;c._enableAnimation();if(!s&&t(a)>d.moveRadius){if(a>0){c.next()}else{c.prev()}}else{c._offsetDrag=0;c.update()}}function E(e){if(l)e.preventDefault()}var t=Math.abs,r=false,s=false,o=this.options.dragRadius,u,a,f,l,c=this,h=this.$element,p=this.$inner,d=this.options,v=false,m=false,g=e(window).width();p.bind(n.events.down+".carousel",y).bind(n.events.move+".carousel",b).bind(n.events.up+".carousel",w).bind("click.carousel",E).bind("mouseout.carousel",w);h.bind("click","[data-slide]",function(t){t.preventDefault();var n=e(this).attr("data-slide"),r=parseInt(n,10);if(isNaN(r)){c[n]()}else{c.move(r)}});h.on("afterSlide",function(e,t,n){c.$items.eq(t-1).removeClass(c._getClass("active"));c.$items.eq(n-1).addClass(c._getClass("active"));c.$element.find("[data-slide='"+t+"']").removeClass(c._getClass("active"));c.$element.find("[data-slide='"+n+"']").addClass(c._getClass("active"))});e(window).on("resize orientationchange",function(t){if(g==e(window).width())return;c._disableAnimation();g=e(window).width();c.update()});h.trigger("beforeSlide",[1,1]);h.trigger("afterSlide",[1,1]);c.update()};s.prototype.unbind=function(){this.$inner.off()};s.prototype.destroy=function(){this.unbind();this.$element.trigger("destroy");this.$element.remove();this.$element=null;this.$inner=null;this.$start=null;this.$current=null};s.prototype.move=function(e,t){var n=this.$element,r=this.$inner,i=this.$items,s=this.$start,o=this.$current,u=this._length,a=this._index;t=t||{};if(e<1){e=1}else if(e>this._length){e=u}if(e==this._index){}this._enableAnimation();n.trigger("beforeSlide",[a,e]);this.$current=o=i.eq(e-1);this._offsetDrag=0;this._index=e;this.update();n.trigger("afterSlide",[a,e])};s.prototype.next=function(){this.move(this._index+1)};s.prototype.prev=function(){this.move(this._index-1)};return s}(t.$,t.UI.Utils);e.fn.carousel=function(n,r){var i=e.extend({},e.fn.carousel.defaults);if(typeof n=="object"){i=e(i,n);r=null;n=null}this.each(function(){var s=e(this),o=this._carousel;if(!o){o=new t.UI.Carousel(this,i)}if(n){o[n](r);if(n==="destroy"){o=null}}this._carousel=o});return this};e.fn.carousel.defaults={}})(jQuery);(function(e){function r(t){e(t).carousel({dragRadius:200,moveRadius:200,classPrefix:undefined,classNames:{outer:"carousel",inner:"carousel-inner",item:"item",touch:"has-touch",dragging:"dragging",active:"active"}})}function u(e){if(e&&typeof e==="function"){return true}return false}var t=function(){var t=e('<div id="mobile-gallery">'+'<div class="m-carousel m-fluid m-carousel-photos">'+'<div id="m-carousel-inner" class="m-carousel-inner">'+"</div>"+"</div>"+"</div>");t.appendTo("body")};var n=function(){var t=e("#mobile-tmp a");e(t.get()).each(function(){var n=e(this).index()+1;var r=e(this).attr("href");var i=e(this).attr("title");var s=e('<div class="m-item"></div>');e("<img />").attr("src",r).appendTo(s).parent().append('<div class="item-caption xtd-mobile-caption-title">'+i+'<span class="xtd-mobile-caption-number">'+n+"/"+t.length+"</span></div>");e("#overlay-mobile").fadeIn(0);s.appendTo(".m-carousel-inner")})};var i=function(t){var n=window.screen.availHeight/window.innerHeight;var r=window.screen.availWidth/window.innerWidth;var i=e(this);var s=i.find("img");t.find("img").each(function(){e(this).load(function(){e(this).parent().attr({"data-image-width":e(this)[0].naturalWidth,"data-image-height":e(this)[0].naturalHeight}).css({"margin-top":Math.abs(Math.round(parseInt(parseInt(window.innerHeight)-e(this).height())*.5))})})});t.css({height:Math.abs(Math.round(parseInt(window.innerHeight)))});t.css({width:Math.abs(Math.round(parseInt(window.innerWidth)))});t.find(".m-item").each(function(){var t=this;e(this).css({"margin-top":Math.abs(Math.round(parseInt(parseInt(window.innerHeight)-e(this).height())*.5))})})};var s=function(t){i(t);return;var n=window.screen.availHeight/window.innerHeight;var r=window.screen.availWidth/window.innerWidth;var s=e(this);var o=s.find("img");t.find("img").each(function(){e(this).load(function(){e(this).parent().attr({"data-image-width":e(this)[0].naturalWidth,"data-image-height":e(this)[0].naturalHeight}).css({"margin-top":Math.abs(Math.round(parseInt(e(window).height()-e(this).height())*.5))/n})})});t.find(".m-item").each(function(){e(this).css({"margin-top":Math.abs(Math.round(parseInt(e(window).height()-e(this).height())*.5)/n)})});t.css({height:Math.abs(Math.round(parseInt(e(window).height())))});t.css({width:Math.abs(Math.round(parseInt(e(window).width()*.9)))});t.css({"padding-left":Math.abs(Math.round(parseInt(e(window).width()-e(t).width())/2)/n)})};var o=function(){var t=e("body");if(t.hasClass("no-scroll")!==true){t.addClass("no-scroll")}};var a=function(){var e=jQuery("body");var t="xtd-body-fix";if(!e.hasClass(t)){e.addClass(t)}};var f=function(){var e=jQuery("#fancybox-wrap");var t=Math.round(parseInt((jQuery(window).height()-e.height())/2));var n=Math.round(parseInt((jQuery(window).width()-e.width())/2))};var l=function(){jQuery("body").addClass("xtd-body-fix");jQuery(".fb-outer-wrapper").find("div").each(function(){if(window.PIE)PIE.attach(this)})};var c=function(){var t=1300;var n=1080;try{var r=Math.round(e(document).height()/n*t);if(jQuery(document).height()>jQuery(window).height()){jQuery("#fancybox-xtdLightbox-effects").css({"-webkit-perspective":r,"-moz-perspective":r,perspective:r})}}catch(i){}};e(window).resize(function(t){t.preventDefault();var n=e(window).width();var r=e(window).height();var i=e("#mobile-gallery");if(i.length!==0){if(i.height!==e(window).height()||i.width!==e(window).width()){s(i)}}});e.fn.extendLightbox=function(i){return e(this).each(function(){if(y&&i.type=="image"){e(this).click(function(i){i.preventDefault();try{var o=e(this).attr("rel");var u=e("#overlay-mobile");if(e("#mobile-tmp").length===0){e('<div id="mobile-tmp" class="hide"></div>').appendTo("body")}if(u.length===0){mobileClose=e('<div id="xtd-mobile-close-button"></div>').prependTo("body");u=e('<div id="overlay-mobile" class="hide"></div>').prependTo("body");u.bind("touchstart touch drag",function(t){e("#mobile-tmp").empty();e("#mobile-gallery").carousel("destroy");e("#mobile-gallery-wrap").remove();e(this).fadeOut();t.preventDefault()});e("#xtd-mobile-close-button").bind("click touchstart",function(){e("#mobile-tmp").empty();e("#mobile-gallery").carousel("destroy");e("#mobile-gallery-wrap").remove();e(this).add(u).remove()})}e("a[rel="+o+"]").clone().appendTo("#mobile-tmp");t();n();var a=e("#mobile-gallery");r(a);if(window.flexiCssMenus.browser.name!="msie"){var f=window.screen.availHeight/window.innerHeight;var l="scale("+1+","+1+")";a[0].style.transform=l;a[0].style.oTransform=l;a[0].style.msTransform=l;a[0].style.mozTransform=l;a[0].style.webkitTransform=l;var c=Hammer(a[0],{transform_always_block:true,transform_min_scale:1,drag_block_horizontal:true,drag_block_vertical:true,drag_min_distance:0});var h=0,p=0,d=1,v,m=1,g;c.on("touch drag transform",function(t){var n=e(".m-active img");var r;switch(t.type){case"touch":n.data("last_scale",d);n.data("last_rotation",m);t.stopImmediatePropagation();return;break;case"transform":var n=e(".m-active img");var i=n.data("last_scale")?n.data("last_scale"):1;var s=n.data("last_scale")?n.data("last_scale"):1;m=s+t.gesture.rotation;d=Math.max(1,Math.min(i*t.gesture.scale,10));t.stopImmediatePropagation();r="scale("+d+","+d+") ";break}n[0].style.transform=r;n[0].style.oTransform=r;n[0].style.msTransform=r;n[0].style.mozTransform=r;n[0].style.webkitTransform=r})}s(a)}catch(i){alert(i)}})}else{if(m){i.width="90%";i.height="90%"}var o=e.extend({},i);i=e.extend(i,{onComplete:function(){if(u(o.onComplete)){o.onComplete()}},onCleanup:function(){if(u(o.onCleanup)){o.onCleanup()}},onStart:function(){c();l();a();f();if(u(o.onStart)){o.onStart()}},onClosed:function(){jQuery("body").removeClass("xtd-body-fix");if(u(o.onClosed)){o.onClosed()}}});e(this).xtd_fancybox(i);e(window).on("resize orientationchange",function(){e.xtd_fancybox.resize()})}})};var h;if(!h){h=new Object}h.UserAgent=navigator.userAgent.toLowerCase();h.isMobile=function(e,t){var n=/iphone|ipod|android|blackberry|mini|windows\sce|windows\sphone|iemobile|palm|webos|series60|symbianos|meego/i.test(h.UserAgent);var r;if(window.matchMedia){r=window.matchMedia("(max-width:"+t+"px)").matches}else{r=e<t}return n||r};h.isTablet=function(e,t,n){var r=h.UserAgent;var i="ontouchstart"in document.documentElement;var s=/ipad|Win64|tablet/i.test(r);var o;if(window.matchMedia){o=window.matchMedia("(max-width:"+n+"px) and (min-width:"+(t+1)+"px)").matches}else{o=e<n&&e>=t}return i&&(s||o)};var p=function(e,t){var n=e["matchMedia"]||e["msMatchMedia"],r=t["clientWidth"],i=e["innerWidth"];return n&&r<i&&true===n("(min-width:"+i+"px)")["matches"]?function(){return e["innerWidth"]}:function(){return t["clientWidth"]}}(window,document.documentElement);var d=p();var v=h.isMobile(d,480);var m=v;var g=h.isTablet(d,480,750);var y=g||v})(jQuery);(function(e){function t(){var e=navigator.userAgent.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];var n=t[2]||"0";var r=n.indexOf(".");var i=n.indexOf(".",r);if(i!=-1){n=parseFloat(n.substring(0,i))}return{name:t[1]||"",version:n}}function n(){var e=document.getElementsByTagName("SCRIPT");for(var t=0;t<e.length;t++){var n=e[t].getAttribute("src");if(n&&n.indexOf("extendLightbox.js")!=-1){if(n.lastIndexOf("/")!=-1){return n.substring(0,n.lastIndexOf("/")+1)}else{return""}}}}function o(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}}function a(){function e(t,n){if(!u[n])u[n]=0;if(!t.rules.length){u[n]++;if(t.owningElement.readyState!="complete"&&u[n]<500){setTimeout(function(t,n){return function(){e(t,n)}}(t,n),10)}}else{for(var r=t.rules.length-1;r>=0;r--){var i=t.rules[r];i.style.behavior="url("+n+")"}}}var t=document.getElementsByTagName("LINK");for(var n=0;n<t.length;n++){var r=t[n].getAttribute("href");if(r){if(r.indexOf("-ie.css")!=-1){var i=r.substring(0,r.lastIndexOf("/"))+"/PIE.htc";e(t[n].styleSheet,i)}}}}function l(e){for(var t=0;t<f.length;t++){if(f[t]==e){return true}}return false}function c(e){var t=document.getElementsByTagName("LINK");for(var n=0;n<t.length;n++){var r=t[n].getAttribute("href");if(r==e){return true}}return false}function h(){if(r.name=="msie"&&r.version<=9){var e=document.getElementsByTagName("LINK");var t=e.length;for(var n=0;n<t;n++){var i=e[n].getAttribute("href");if(!l(i)){f.push(i);if(i&&i.indexOf("http://")==-1&&i.indexOf("reset.css")==-1&&i.indexOf("-ie.css")==-1&&i.toLowerCase().indexOf(s.toLowerCase())!=-1){if(!c(i.replace(".css","-ie.css"))){document.createStyleSheet(i.replace(".css","-ie.css"));f.push(i.replace(".css","-ie.css"))}}}}}}var r=t();if(!window.flexiCssMenus)window.flexiCssMenus={};window.flexiCssMenus.browser=t();var i=n();var s=i;var u={};var f=[];h();o(window,"load",function(){h();if(r.name=="msie"&&r.version==7){window.setTimeout(function(){a()},1e3)}if(r.name=="msie"&&r.version<=9&&r.version!=7){a()}})})(jQuery);(function(e,t){"use strict";function n(){if(!r.READY){r.event.determineEventTypes();for(var e in r.gestures)r.gestures.hasOwnProperty(e)&&r.detection.register(r.gestures[e]);r.event.onTouch(r.DOCUMENT,r.EVENT_MOVE,r.detection.detect),r.event.onTouch(r.DOCUMENT,r.EVENT_END,r.detection.detect),r.READY=!0}}var r=function(e,t){return new r.Instance(e,t||{})};r.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},r.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,r.HAS_TOUCHEVENTS="ontouchstart"in e,r.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,r.NO_MOUSEEVENTS=r.HAS_TOUCHEVENTS&&navigator.userAgent.match(r.MOBILE_REGEX),r.EVENT_TYPES={},r.DIRECTION_DOWN="down",r.DIRECTION_LEFT="left",r.DIRECTION_UP="up",r.DIRECTION_RIGHT="right",r.POINTER_MOUSE="mouse",r.POINTER_TOUCH="touch",r.POINTER_PEN="pen",r.EVENT_START="start",r.EVENT_MOVE="move",r.EVENT_END="end",r.DOCUMENT=document,r.plugins={},r.READY=!1,r.Instance=function(e,t){var i=this;return n(),this.element=e,this.enabled=!0,this.options=r.utils.extend(r.utils.extend({},r.defaults),t||{}),this.options.stop_browser_behavior&&r.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),r.event.onTouch(e,r.EVENT_START,function(e){i.enabled&&r.detection.startDetect(i,e)}),this},r.Instance.prototype={on:function(e,t){for(var n=e.split(" "),r=0;n.length>r;r++)this.element.addEventListener(n[r],t,!1);return this},off:function(e,t){for(var n=e.split(" "),r=0;n.length>r;r++)this.element.removeEventListener(n[r],t,!1);return this},trigger:function(e,t){var n=r.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var i=this.element;return r.utils.hasParent(t.target,i)&&(i=t.target),i.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this}};var i=null,s=!1,o=!1;r.event={bindDom:function(e,t,n){for(var r=t.split(" "),i=0;r.length>i;i++)e.addEventListener(r[i],n,!1)},onTouch:function(e,t,n){var u=this;this.bindDom(e,r.EVENT_TYPES[t],function(f){var l=f.type.toLowerCase();if(!l.match(/mouse/)||!o){(l.match(/touch/)||l.match(/pointerdown/)||l.match(/mouse/)&&1===f.which)&&(s=!0),l.match(/touch|pointer/)&&(o=!0);var c=0;s&&(r.HAS_POINTEREVENTS&&t!=r.EVENT_END?c=r.PointerEvent.updatePointer(t,f):l.match(/touch/)?c=f.touches.length:o||(c=l.match(/up/)?0:1),c>0&&t==r.EVENT_END?t=r.EVENT_MOVE:c||(t=r.EVENT_END),c||null===i?i=f:f=i,n.call(r.detection,u.collectEventData(e,t,f)),r.HAS_POINTEREVENTS&&t==r.EVENT_END&&(c=r.PointerEvent.updatePointer(t,f))),c||(i=null,s=!1,o=!1,r.PointerEvent.reset())}})},determineEventTypes:function(){var e;e=r.HAS_POINTEREVENTS?r.PointerEvent.getEvents():r.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],r.EVENT_TYPES[r.EVENT_START]=e[0],r.EVENT_TYPES[r.EVENT_MOVE]=e[1],r.EVENT_TYPES[r.EVENT_END]=e[2]},getTouchList:function(e){return r.HAS_POINTEREVENTS?r.PointerEvent.getTouchList():e.touches?e.touches:[{identifier:1,pageX:e.pageX,pageY:e.pageY,target:e.target}]},collectEventData:function(e,t,n){var i=this.getTouchList(n,t),s=r.POINTER_TOUCH;return(n.type.match(/mouse/)||r.PointerEvent.matchType(r.POINTER_MOUSE,n))&&(s=r.POINTER_MOUSE),{center:r.utils.getCenter(i),timeStamp:(new Date).getTime(),target:n.target,touches:i,eventType:t,pointerType:s,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return r.detection.stopDetect()}}}},r.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return Object.keys(e.pointers).sort().forEach(function(n){t.push(e.pointers[n])}),t},updatePointer:function(e,t){return e==r.EVENT_END?this.pointers={}:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t),Object.keys(this.pointers).length},matchType:function(e,t){if(!t.pointerType)return!1;var n={};return n[r.POINTER_MOUSE]=t.pointerType==t.MSPOINTER_TYPE_MOUSE||t.pointerType==r.POINTER_MOUSE,n[r.POINTER_TOUCH]=t.pointerType==t.MSPOINTER_TYPE_TOUCH||t.pointerType==r.POINTER_TOUCH,n[r.POINTER_PEN]=t.pointerType==t.MSPOINTER_TYPE_PEN||t.pointerType==r.POINTER_PEN,n[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},r.utils={extend:function(e,n,r){for(var i in n)e[i]!==t&&r||(e[i]=n[i]);return e},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){for(var t=[],n=[],r=0,i=e.length;i>r;r++)t.push(e[r].pageX),n.push(e[r].pageY);return{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.pageY-e.pageY,r=t.pageX-e.pageX;return 180*Math.atan2(n,r)/Math.PI},getDirection:function(e,t){var n=Math.abs(e.pageX-t.pageX),i=Math.abs(e.pageY-t.pageY);return n>=i?e.pageX-t.pageX>0?r.DIRECTION_LEFT:r.DIRECTION_RIGHT:e.pageY-t.pageY>0?r.DIRECTION_UP:r.DIRECTION_DOWN},getDistance:function(e,t){var n=t.pageX-e.pageX,r=t.pageY-e.pageY;return Math.sqrt(n*n+r*r)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==r.DIRECTION_UP||e==r.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(e,t){var n,r=["webkit","khtml","moz","ms","o",""];if(t&&e.style){for(var i=0;r.length>i;i++)for(var s in t)t.hasOwnProperty(s)&&(n=s,r[i]&&(n=r[i]+n.substring(0,1).toUpperCase()+n.substring(1)),e.style[n]=t[s]);"none"==t.userSelect&&(e.onselectstart=function(){return!1})}}},r.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:r.utils.extend({},t),lastEvent:!1,name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);for(var t=this.current.inst.options,n=0,i=this.gestures.length;i>n;n++){var s=this.gestures[n];if(!this.stopped&&t[s.name]!==!1&&s.handler.call(s,e,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=e),e.eventType==r.EVENT_END&&!e.touches.length-1&&this.stopDetect(),e}},stopDetect:function(){this.previous=r.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(e){var t=this.current.startEvent;if(t&&(e.touches.length!=t.touches.length||e.touches===t.touches)){t.touches=[];for(var n=0,i=e.touches.length;i>n;n++)t.touches.push(r.utils.extend({},e.touches[n]))}var s=e.timeStamp-t.timeStamp,o=e.center.pageX-t.center.pageX,u=e.center.pageY-t.center.pageY,a=r.utils.getVelocity(s,o,u);return r.utils.extend(e,{deltaTime:s,deltaX:o,deltaY:u,velocityX:a.x,velocityY:a.y,distance:r.utils.getDistance(t.center,e.center),angle:r.utils.getAngle(t.center,e.center),direction:r.utils.getDirection(t.center,e.center),scale:r.utils.getScale(t.touches,e.touches),rotation:r.utils.getRotation(t.touches,e.touches),startEvent:t}),e},register:function(e){var n=e.defaults||{};return n[e.name]===t&&(n[e.name]=!0),r.utils.extend(r.defaults,n,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},r.gestures=r.gestures||{},r.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(e,t){switch(e.eventType){case r.EVENT_START:clearTimeout(this.timer),r.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==r.detection.current.name&&t.trigger("hold",e)},t.options.hold_timeout);break;case r.EVENT_MOVE:e.distance>t.options.hold_threshold&&clearTimeout(this.timer);break;case r.EVENT_END:clearTimeout(this.timer)}}},r.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(e,t){if(e.eventType==r.EVENT_END){var n=r.detection.previous,i=!1;if(e.deltaTime>t.options.tap_max_touchtime||e.distance>t.options.tap_max_distance)return;n&&"tap"==n.name&&e.timeStamp-n.lastEvent.timeStamp<t.options.doubletap_interval&&e.distance<t.options.doubletap_distance&&(t.trigger("doubletap",e),i=!0),(!i||t.options.tap_always)&&(r.detection.current.name="tap",t.trigger(r.detection.current.name,e))}}},r.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(e,t){if(e.eventType==r.EVENT_END){if(t.options.swipe_max_touches>0&&e.touches.length>t.options.swipe_max_touches)return;(e.velocityX>t.options.swipe_velocity||e.velocityY>t.options.swipe_velocity)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},r.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(e,n){if(r.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",e),this.triggered=!1,t;if(!(n.options.drag_max_touches>0&&e.touches.length>n.options.drag_max_touches))switch(e.eventType){case r.EVENT_START:this.triggered=!1;break;case r.EVENT_MOVE:if(e.distance<n.options.drag_min_distance&&r.detection.current.name!=this.name)return;r.detection.current.name=this.name,(r.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=e.distance)&&(e.drag_locked_to_axis=!0);var i=r.detection.current.lastEvent.direction;e.drag_locked_to_axis&&i!==e.direction&&(e.direction=r.utils.isVertical(i)?0>e.deltaY?r.DIRECTION_UP:r.DIRECTION_DOWN:0>e.deltaX?r.DIRECTION_LEFT:r.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",e),this.triggered=!0),n.trigger(this.name,e),n.trigger(this.name+e.direction,e),(n.options.drag_block_vertical&&r.utils.isVertical(e.direction)||n.options.drag_block_horizontal&&!r.utils.isVertical(e.direction))&&e.preventDefault();break;case r.EVENT_END:this.triggered&&n.trigger(this.name+"end",e),this.triggered=!1}}},r.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(e,n){if(r.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",e),this.triggered=!1,t;if(!(2>e.touches.length))switch(n.options.transform_always_block&&e.preventDefault(),e.eventType){case r.EVENT_START:this.triggered=!1;break;case r.EVENT_MOVE:var i=Math.abs(1-e.scale),s=Math.abs(e.rotation);if(n.options.transform_min_scale>i&&n.options.transform_min_rotation>s)return;r.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",e),this.triggered=!0),n.trigger(this.name,e),s>n.options.transform_min_rotation&&n.trigger("rotate",e),i>n.options.transform_min_scale&&(n.trigger("pinch",e),n.trigger("pinch"+(1>e.scale?"in":"out"),e));break;case r.EVENT_END:this.triggered&&n.trigger(this.name+"end",e),this.triggered=!1}}},r.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(e,n){return n.options.prevent_mouseevents&&e.pointerType==r.POINTER_MOUSE?(e.stopDetect(),t):(n.options.prevent_default&&e.preventDefault(),e.eventType==r.EVENT_START&&n.trigger(this.name,e),t)}},r.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==r.EVENT_END&&t.trigger(this.name,e)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=r:(e.Hammer=r,"function"==typeof e.define&&e.define.amd&&e.define("hammer",[],function(){return r}))})(this),function(e,t){"use strict";e!==t&&(Hammer.event.bindDom=function(n,r,i){e(n).on(r,function(e){var n=e.originalEvent||e;n.pageX===t&&(n.pageX=e.pageX,n.pageY=e.pageY),n.target||(n.target=e.target),n.which===t&&(n.which=n.button),n.preventDefault||(n.preventDefault=e.preventDefault),n.stopPropagation||(n.stopPropagation=e.stopPropagation),i.call(this,n)})},Hammer.Instance.prototype.on=function(t,n){return e(this.element).on(t,n)},Hammer.Instance.prototype.off=function(t,n){return e(this.element).off(t,n)},Hammer.Instance.prototype.trigger=function(t,n){var r=e(this.element);return r.has(n.target).length&&(r=e(n.target)),r.trigger({type:t,gesture:n})},e.fn.hammer=function(t){return this.each(function(){var n=e(this),r=n.data("hammer");r?r&&t&&Hammer.utils.extend(r.options,t):n.data("hammer",new Hammer(this,t||{}))})})}(window.jQuery||window.Zepto)